\[[<](./p0028.md)] \[[^](../README_ja.md)] \[[>](./p0030.md)]

# Problem 29: Distinct Powers

## The link to the problem

- [Distinct Powers](https://projecteuler.net/problem=29)

## My approach

この問題の意図は対数を使って大きな数を扱うことを目的としていたのではないかと思う。
多倍長整数が使えるなら対数を使う必要もなく、簡単に解ける。

## Consideration of improvement

上述のように総当たりで $99^{2}$ 通りの計算をすれば解くのは簡単だが、他の解き方を考えてみる。

同じ値が出る条件を探してみる。結論から書くと、冪乗の底 $a$ 自身が冪乗である場合に同じ値が出てくる。
例えば、
$a^{b}$
の底 $a$ が $x$ の 2 乗であるとすると

$$
(x^2)^{y} =  (x^1)^{2y}
$$

上記の式から $y > 1$ かつ $2y \le 100$ から 49 通りの $b$ が存在することがわかる。

続いて、
$a^{b}$
の底 $a$ が $x$ の 3 乗であるとすると

$$
\begin{align}
(x^3)^{y} & = (x^1)^{3y} \\
(x^3)^{2y} & = (x^2)^{3y}
\end{align}
$$

前者の式から $b \in \lbrace 2, 3, \cdots, 33 \rbrace$ となり、
後者の式からは $b \in \lbrace 2, 4, \cdots, 66 \rbrace$ となる。
なお、数え上げの際は同じ値が存在していることに注意。

同様に
$a^{b}$
の底
$a$
が $x$ の 4 乗であるとすると

$$
\begin{align}
(x^4)^{y} & = (x^1)^{4y} \\
(x^4)^{2y} & = (x^2)^{4y} \\
(x^4)^{3y} & = (x^3)^{4y}
\end{align}
$$

それぞれ、 $b \in \lbrace 2, 3, \cdots, 25 \rbrace$, $b \in \lbrace 2, 3, \cdots, 50 \rbrace$,
$b \in \lbrace 3, 6, \cdots, 75 \rbrace$ となる。

このようにして、実際の冪乗を計算せずとも重複の数を知ることができる。
この問題では底/指数ともに上限が 100 なので素朴にチェックしても十分速いが、
上限がもっと大きくなる場合は数え上げの際に包除原理などの効率的な手段が必要になると思われる。

